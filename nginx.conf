# HTTP server - hanya untuk Let's Encrypt dan redirect ke HTTPS
server {
    listen 80;
    server_name hexcub.zqdevs.my.id;

    root /var/www/hexcub_client/dist;
    index index.html;

    # Buka path untuk certbot challenge
    # location /.well-known/acme-challenge/ {
    #     allow all;
    #     root /var/www/hexcub_client/dist;
    # }

    # Redirect semua ke HTTPS
    location / {
        return 301 https://$host$request_uri;
    }
}

# HTTPS server - akan aktif setelah certbot berhasil
server {
    listen 443 ssl;
    server_name hexcub.zqdevs.my.id;

    ssl_certificate /etc/ssl/certs/ssl-cert.pem;
    ssl_certificate_key /etc/ssl/private/ssl-cert.key;

    root /var/www/hexcub_client/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
